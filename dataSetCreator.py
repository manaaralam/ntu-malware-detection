# -*- coding: utf-8 -*-
"""
Created on Thu Aug 31 2017

@author: N1705165D (Manaar)
"""

import createBenignMaliciousExamples as cBME
import random

num_test_benign = 10
num_test_malware = 10

def generate():
    train_benign = random.sample(range(1, cBME.benign_examples + 1), cBME.benign_examples - num_test_benign)
    test_benign = []
    for item in range(1, cBME.benign_examples + 1):
        if item not in train_benign:
            test_benign.append(item)
    
    train_malicious = random.sample(range(1, cBME.malware_examples + 1), cBME.malware_examples - num_test_malware)
    test_malicious = []
    for item in range(1, cBME.malware_examples + 1):
        if item not in train_malicious:
            test_malicious.append(item)
    
    train_benign.sort()
    train_malicious.sort()
    test_benign.sort()
    test_malicious.sort()
    
    with open("tempData/train_benign.txt", "w") as outFile:
        for fname in train_benign:
            with open("benign/prog"+str(fname)+".txt") as inFile:
                outFile.write(inFile.read())
    
    with open("tempData/test_benign.txt", "w") as outFile:
        for fname in test_benign:
            with open("benign/prog"+str(fname)+".txt") as inFile:
                outFile.write(inFile.read())
    
    with open("tempData/train_malicious.txt", "w") as outFile:
        for fname in train_malicious:
            with open("malicious/prog"+str(fname)+".txt") as inFile:
                outFile.write(inFile.read())
    
    with open("tempData/test_malicious.txt", "w") as outFile:
        for fname in test_malicious:
            with open("malicious/prog"+str(fname)+".txt") as inFile:
                outFile.write(inFile.read())
    
    with open("train_data.txt", "w") as outFile:
        with open("tempData/train_benign.txt") as inFile:
            content = inFile.readlines()
        content = [x.strip()+" 0\n" for x in content]
        for item in content:
            outFile.write(item.replace(" ", ","))
        with open("tempData/train_malicious.txt") as inFile:
            content = inFile.readlines()
        content = [x.strip()+" 1\n" for x in content]
        for item in content:
            outFile.write(item.replace(" ", ","))
    
    with open("test_data.txt", "w") as outFile:
        with open("tempData/test_benign.txt") as inFile:
            content = inFile.readlines()
        content = [x.strip()+" 0\n" for x in content]
        for item in content:
            outFile.write(item.replace(" ", ","))
        with open("tempData/test_malicious.txt") as inFile:
            content = inFile.readlines()
        content = [x.strip()+" 1\n" for x in content]
        for item in content:
            outFile.write(item.replace(" ", ","))