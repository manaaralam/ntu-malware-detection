# -*- coding: utf-8 -*-
"""
Created on Wed Sep 13 15:01:43 2017

@author: N1705165D
"""

import matplotlib.pyplot as plt
import pandas as pd

alpha = [0.1, 0.05, 0.02, 0.01, 0.0001]

def line_plot(benign_data, malware_data):
    ax = plt.subplot(111)
    for num in range(len(alpha)):
        ax.plot(benign_data[num], label = "Benign with Confidence %s%%" % ((1 - alpha[num]) * 100))
        ax.plot(malware_data[num], label = "Malware with Confidence %s%%" % ((1 - alpha[num]) * 100))
    plt.xlabel("Program Under Test")
    plt.ylabel("Score (lambda)")
    box = ax.get_position()
    ax.set_position([box.x0, box.y0, box.width * 0.8, box.height])
    ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))
#    plt.show()
    plt.title("Variation of Score for Program Under Test \n for different Confidence Level")
    plt.tight_layout()
    plt.savefig("significance.png", bbox_inches='tight')
    
def plot():
    benign_data = []
    malware_data = []
    for a in alpha:
        data = pd.read_csv(str(a)+"_score.txt", header=None).as_matrix()[:,0]
        benign_data.append(data[0:10])
        malware_data.append(data[10:20])
    line_plot(benign_data, malware_data)
    
    for i in range(len(alpha)):
        data1 = benign_data[i]
        data2 = malware_data[i]
        diff = 0
        for i in range(len(data2)):
            for j in range(len(data1)):
                diff = diff + (data2[i] - data1[j])
        print(diff/(len(data1)*len(data2)))

def line_plot_hotelling(benign_data, malware_data):
    ax = plt.subplot(111)
    ax.plot(benign_data[0], label = "Benign for Welch's t-test")
    ax.plot(malware_data[0], label = "Malware for Welch's t-test")
    ax.plot(benign_data[1], label = "Benign for Hotelling's t-test")
    ax.plot(malware_data[1], label = "Malware for Hotelling's t-test")
    plt.xlabel("Program Under Test")
    plt.ylabel("Score (lambda)")
    box = ax.get_position()
    ax.set_position([box.x0, box.y0, box.width * 0.8, box.height])
    ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))
    plt.show()

def plot_hotelling():
    benign_data = []
    malware_data = []
    data1 = pd.read_csv(str(alpha)+"_score.txt", header=None).as_matrix()[:,0]
    data2 = pd.read_csv("../multivariate_detection_equal_variance/score.txt", header=None).as_matrix()[:,0]
    benign_data.append(data1[0:10])
    malware_data.append(data1[10:20])
    benign_data.append(data2[0:10])
    malware_data.append(data2[10:20])
    line_plot_hotelling(benign_data, malware_data)
    for i in range(2):
        data1 = benign_data[i]
        data2 = malware_data[i]
        diff = 0
        for i in range(len(data2)):
            for j in range(len(data1)):
                diff = diff + (data2[i] - data1[j])
        print(diff/(len(data1)*len(data2)))

plot()